#!/bin/bash
# é‡æ–°æ„å»º SACToR Docker é•œåƒ
# ç”¨äºåº”ç”¨ä»£ç ä¿®æ”¹

echo "================================================================================"
echo "ğŸ”§ é‡æ–°æ„å»º SACToR Docker é•œåƒ"
echo "================================================================================"
echo ""
echo "ğŸ“‹ å°†åº”ç”¨ä»¥ä¸‹ä¿®æ”¹:"
echo "   - qwen_llm.py: ä¿®å¤ enable_thinking å‚æ•°é—®é¢˜"
echo "   - æ”¯æŒ thinking æ¨¡å‹å’Œæ™®é€šæ¨¡å‹"
echo ""
echo "â±ï¸  é¢„è®¡æ—¶é—´: 2-5 åˆ†é’Ÿ (åˆ©ç”¨ç¼“å­˜)"
echo ""
echo "================================================================================"
echo ""

cd /home/changdi/sactor

# æ£€æŸ¥ Dockerfile æ˜¯å¦å­˜åœ¨
if [ ! -f "Dockerfile" ]; then
    echo "âŒ é”™è¯¯: æ‰¾ä¸åˆ° Dockerfile"
    exit 1
fi

# å¼€å§‹æ„å»º
echo "ğŸš€ å¼€å§‹æ„å»º Docker é•œåƒ..."
echo ""

docker build -t sactor .

if [ $? -eq 0 ]; then
    echo ""
    echo "================================================================================"
    echo "âœ… Docker é•œåƒæ„å»ºæˆåŠŸï¼"
    echo "================================================================================"
    echo ""
    echo "ğŸ“‹ éªŒè¯é•œåƒ:"
    docker images | grep sactor | head -1
    echo ""
    echo "ğŸš€ ç°åœ¨å¯ä»¥ç»§ç»­ç¿»è¯‘:"
    echo "   cd /home/changdi/sactor"
    echo "   ./start_translate_all_accepted.sh 10 6"
    echo ""
    echo "ğŸ’¡ æç¤º:"
    echo "   - ç¿»è¯‘ä¼šä»ä¸Šæ¬¡ä¸­æ–­çš„åœ°æ–¹ç»§ç»­"
    echo "   - å·²å®Œæˆçš„ä»»åŠ¡ä¸ä¼šé‡å¤ç¿»è¯‘"
    echo "   - è¿›åº¦ä¿å­˜åœ¨ translation_progress.json"
    echo ""
    echo "================================================================================"
else
    echo ""
    echo "================================================================================"
    echo "âŒ Docker é•œåƒæ„å»ºå¤±è´¥"
    echo "================================================================================"
    echo ""
    echo "è¯·æ£€æŸ¥é”™è¯¯ä¿¡æ¯å¹¶é‡è¯•"
    echo ""
    exit 1
fi

